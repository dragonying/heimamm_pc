(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-5fdb6fb9"],{"129f":function(e,t){e.exports=Object.is||function(e,t){return e===t?0!==e||1/e===1/t:e!=e&&t!=t}},"409b":function(e,t,r){},5530:function(e,t,r){"use strict";r.d(t,"a",(function(){return i}));r("a4d3"),r("4de4"),r("4160"),r("e439"),r("dbb4"),r("b64b"),r("159b");function a(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function n(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,a)}return r}function i(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?n(Object(r),!0).forEach((function(t){a(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):n(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}},"618a":function(e,t,r){"use strict";r("409b")},"647b":function(e,t,r){"use strict";r("8ea4")},7108:function(e,t,r){"use strict";r.r(t);var a=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",{staticClass:"user-container"},[r("el-card",{staticClass:"box-card search-box"},[r("el-form",{ref:"search",staticClass:"demo-form-inline",attrs:{inline:!0,model:e.searchItem}},[r("el-form-item",{attrs:{label:"用户名称",prop:"username"}},[r("el-input",{staticClass:"min-input",model:{value:e.searchItem.username,callback:function(t){e.$set(e.searchItem,"username","string"===typeof t?t.trim():t)},expression:"searchItem.username"}})],1),r("el-form-item",{attrs:{label:"用户邮箱",prop:"email"}},[r("el-input",{staticClass:"middle-input",model:{value:e.searchItem.email,callback:function(t){e.$set(e.searchItem,"email","string"===typeof t?t.trim():t)},expression:"searchItem.email"}})],1),r("el-form-item",{attrs:{label:"角色",prop:"role_id"}},[r("el-select",{staticClass:"middle-input",model:{value:e.searchItem.role_id,callback:function(t){e.$set(e.searchItem,"role_id",t)},expression:"searchItem.role_id"}},e._l(e.rolesLable,(function(e){return r("el-option",{key:e.value,attrs:{label:e.title,value:e.value}})})),1)],1),r("el-form-item",{attrs:{label:"用户状态",prop:"status"}},[r("el-select",{staticClass:"middle-input",model:{value:e.searchItem.status,callback:function(t){e.$set(e.searchItem,"status",t)},expression:"searchItem.status"}},e._l(e.statusLable,(function(e){return r("el-option",{key:e.value,attrs:{label:e.title,value:e.value}})})),1)],1),r("el-form-item",[r("el-button",{attrs:{type:"primary"},on:{click:e.onSubmit}},[e._v("搜索")]),r("el-button",{on:{click:e.clear}},[e._v("清除")]),r("el-button",{attrs:{type:"primary",icon:"el-icon-plus"},on:{click:e.addDialog}},[e._v("新增用户")])],1)],1)],1),r("el-card",{staticClass:"box-card table-box"},[r("el-table",{staticStyle:{width:"100%"},attrs:{data:e.tableData}},[r("el-table-column",{attrs:{type:"index",label:"序号"}}),r("el-table-column",{attrs:{prop:"id",label:"ID"}}),r("el-table-column",{attrs:{label:"头像"},scopedSlots:e._u([{key:"default",fn:function(t){return[t.row.avatar?r("el-image",{staticClass:"avatar",attrs:{src:e._f("useravatar")(t.row.avatar),fit:"cover","preview-src-list":e.preview(t.row)}}):e._e()]}}])}),r("el-table-column",{attrs:{prop:"username",label:"用户名"}}),r("el-table-column",{attrs:{prop:"phone",label:"电话"}}),r("el-table-column",{attrs:{prop:"email",label:"邮箱"}}),r("el-table-column",{attrs:{prop:"role",label:"角色"}}),r("el-table-column",{attrs:{label:"备注"},scopedSlots:e._u([{key:"default",fn:function(t){return[r("el-popover",{attrs:{placement:"top-start",title:"简介",width:"300",trigger:"hover",content:e._f("userIntro")(t.row.remark)}},[r("span",{staticClass:"intro",attrs:{slot:"reference"},slot:"reference"},[e._v(e._s(t.row.remark))])])]}}])}),r("el-table-column",{attrs:{label:"状态"},scopedSlots:e._u([{key:"default",fn:function(t){return[r("span",{class:{red:!t.row.status}},[e._v(e._s(e._f("statusTitle")(t.row.status,e.statusLable)))])]}}])}),r("el-table-column",{attrs:{label:"操作"},scopedSlots:e._u([{key:"default",fn:function(t){return[r("el-button",{attrs:{size:"mini",type:"primary"},on:{click:function(r){return e.editDialog(t.row)}}},[e._v("编辑")]),r("el-button",{attrs:{size:"mini",type:t.row.status?"info":"success"},on:{click:function(r){return e.changeStatus(t.row)}}},[e._v(e._s(t.row.status?"禁用":"启用"))]),r("el-button",{attrs:{size:"mini",type:"danger"},on:{click:function(r){return e.del(t.row)}}},[e._v("删除")])]}}])})],1),r("el-pagination",{attrs:{"current-page":e.page.currentPage,"page-sizes":e.page.pageSizes,"page-size":e.page.pageSize,layout:e.page.layout,total:e.page.total},on:{"size-change":e.handleSizeChange,"current-change":e.handleCurrentChange}})],1),r("diaLogComponent",{ref:"dialog"})],1)},n=[],i=(r("c740"),r("c975"),r("a15b"),r("d81d"),r("ac1f"),r("841c"),r("5530")),s=r("b775");function o(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;return Object(s["a"])({url:"/user/list",method:"get",params:e},t)}function l(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;return Object(s["a"])({url:"/user/status",method:"post",data:e},t)}function u(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;return Object(s["a"])({url:"/user/remove",method:"post",data:e},t)}function c(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;return Object(s["a"])({url:"/user/add",method:"post",data:e},t)}function d(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;return Object(s["a"])({url:"/user/edit",method:"post",data:e},t)}function m(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null;return Object(s["a"])({url:"/user/userRoles",method:"get"},e)}var f=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("el-dialog",{attrs:{title:e.editForm.id>0?"编辑用户":"新增用户",width:e.width,center:"",visible:e.showDialog},on:{"update:visible":function(t){e.showDialog=t},closed:e.closeHandler}},[r("el-form",{ref:"editForm",attrs:{model:e.editForm,rules:e.rules,"label-width":e.labelWidth}},[r("el-form-item",{attrs:{label:"用户名",prop:"username"}},[r("el-input",{model:{value:e.editForm.username,callback:function(t){e.$set(e.editForm,"username","string"===typeof t?t.trim():t)},expression:"editForm.username"}})],1),r("el-form-item",{attrs:{label:"邮箱",prop:"email"}},[r("el-input",{model:{value:e.editForm.email,callback:function(t){e.$set(e.editForm,"email","string"===typeof t?t.trim():t)},expression:"editForm.email"}})],1),r("el-form-item",{attrs:{label:"电话",prop:"phone"}},[r("el-input",{model:{value:e.editForm.phone,callback:function(t){e.$set(e.editForm,"phone",t)},expression:"editForm.phone"}})],1),r("el-form-item",{attrs:{label:"角色",prop:"role_id"}},[r("el-select",{model:{value:e.editForm.role_id,callback:function(t){e.$set(e.editForm,"role_id",t)},expression:"editForm.role_id"}},e._l(e.rolesLable,(function(e){return r("el-option",{key:e.value,attrs:{label:e.title,value:e.value}})})),1)],1),r("el-form-item",{attrs:{label:"状态",prop:"status"}},[r("el-select",{model:{value:e.editForm.status,callback:function(t){e.$set(e.editForm,"status",t)},expression:"editForm.status"}},e._l(e.statusLable,(function(e){return r("el-option",{key:e.value,attrs:{label:e.title,value:e.value}})})),1)],1),r("el-form-item",{attrs:{label:"用户备注",prop:"remark"}},[r("el-input",{model:{value:e.editForm.remark,callback:function(t){e.$set(e.editForm,"remark",t)},expression:"editForm.remark"}})],1)],1),r("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[r("el-button",{on:{click:e.close}},[e._v("取 消")]),r("el-button",{attrs:{type:"primary"},on:{click:e.onSubmit}},[e._v("确 定")])],1)],1)},p=[],g={name:"user-dialog",data:function(){return{showDialog:!1,labelWidth:"85px",width:"600px",editForm:{id:"",username:"",email:"",phone:"",role_id:"",status:"",remark:""},rules:{username:[{required:!0,message:"请上输入用户名",trigger:"blur"}],email:[{required:!0,type:"email",message:"请上输入邮箱",trigger:"blur"}],phone:[{required:!0,message:"请上输入手机号",trigger:"blur"},{pattern:/^1(3|4|5|6|7|8|9)\d{9}$/,message:"手机号码格式错误",trigger:["blur"]}],role_id:[{required:!0,message:"请选择角色",trigger:"blur"}]},statusLable:[{title:"启用",value:1},{title:"禁用",value:0}],rolesLable:[]}},methods:{onSubmit:function(){var e=this;this.$refs.editForm.validate((function(t){t?e.editForm.id>0?d(e.editForm,(function(){e.$message.success("编辑成功"),e.close(),e.$parent.getUserList()})):c(e.editForm,(function(){e.$message.success("添加成功"),e.close(),e.$parent.getUserList()})):e.$message.warning("请输入正确的信息！")}))},close:function(){this.showDialog=!1},closeHandler:function(){this.editForm.id="",this.$refs.editForm.resetFields()}},mounted:function(){var e=this;m((function(t){e.rolesLable=t}))}},b=g,h=(r("618a"),r("2877")),v=Object(h["a"])(b,f,p,!1,null,null,null),y=v.exports,w=r("3de1"),O={name:"user-list",components:{diaLogComponent:y},data:function(){return{searchItem:{username:"",email:"",role_id:"",status:""},tableData:[],page:{currentPage:1,total:0,pageSize:10,pageSizes:[10,1,20,30,40,50],layout:"total, sizes, prev, pager, next, jumper"},statusLable:[{title:"启用",value:1},{title:"禁用",value:0}],rolesLable:[]}},watch:{"page.total":function(){this.page.total==(this.page.currentPage-1)*this.page.pageSize&&0!=this.page.total&&(this.page.currentPage-=1,this.getUserList())}},methods:{addDialog:function(){this.$refs.dialog.showDialog=!0},editDialog:function(e){this.$refs.dialog.showDialog=!0,this.$refs.dialog.editForm=Object(w["a"])({id:e.id,username:e.username,email:e.email,phone:e.phone,role_id:e.role_id,status:e.status,remark:e.remark})},onSubmit:function(){this.page.currentPage=1,this.getUserList()},clear:function(){this.$refs.search.resetFields(),this.page.currentPage=1,this.getUserList()},handleSizeChange:function(e){this.page.pageSize=e,this.getUserList()},handleCurrentChange:function(e){this.page.currentPage=e,this.getUserList()},getUserList:function(){var e=this;o(Object(i["a"])({limit:this.page.pageSize,page:this.page.currentPage},this.searchItem),(function(t){e.tableData=t.items,e.page.total=t.pagination.total}))},changeStatus:function(e){var t=this;this.$confirm("是否确认".concat(e.status?"禁用":"启用","?"),"提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then((function(){l({id:e.id},(function(){t.$message({message:"操作成功",type:"success",onClose:function(){t.getUserList()}})}))})).catch((function(){}))},del:function(e){var t=this;this.$confirm("是否确认删除","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then((function(){u({id:e.id},(function(){t.$message({message:"操作成功",type:"success",onClose:function(){t.getUserList()}})}))})).catch((function(){}))},preview:function(e){return e.pic?e.pic.map((function(e){return"http://heima.backend.2dan88.com/"+e})):[]}},filters:{statusTitle:function(e,t){return t[t.findIndex((function(t){return t.value==e}))].title},userIntro:function(e){var t=["生日","星座","今年","身高","三围","罩杯","血型","来自","职业","兴趣"],r=t.map((function(t,r,a){var n=e.indexOf(t)+t.length,i=e.indexOf(a[r+1]),s=i<0?e.substring(n):e.substring(n,i);return t+s}));return r.join(" ")},useravatar:function(e){return"http://heima.backend.2dan88.com/"+e}},mounted:function(){var e=this;this.getUserList(),m((function(t){e.rolesLable=t}))}},k=O,_=(r("647b"),Object(h["a"])(k,a,n,!1,null,null,null));t["default"]=_.exports},"841c":function(e,t,r){"use strict";var a=r("d784"),n=r("825a"),i=r("1d80"),s=r("129f"),o=r("14c3");a("search",1,(function(e,t,r){return[function(t){var r=i(this),a=void 0==t?void 0:t[e];return void 0!==a?a.call(t,r):new RegExp(t)[e](String(r))},function(e){var a=r(t,e,this);if(a.done)return a.value;var i=n(e),l=String(this),u=i.lastIndex;s(u,0)||(i.lastIndex=0);var c=o(i,l);return s(i.lastIndex,u)||(i.lastIndex=u),null===c?-1:c.index}]}))},"8ea4":function(e,t,r){},a15b:function(e,t,r){"use strict";var a=r("23e7"),n=r("44ad"),i=r("fc6a"),s=r("a640"),o=[].join,l=n!=Object,u=s("join",",");a({target:"Array",proto:!0,forced:l||!u},{join:function(e){return o.call(i(this),void 0===e?",":e)}})},b64b:function(e,t,r){var a=r("23e7"),n=r("7b0b"),i=r("df75"),s=r("d039"),o=s((function(){i(1)}));a({target:"Object",stat:!0,forced:o},{keys:function(e){return i(n(e))}})},c975:function(e,t,r){"use strict";var a=r("23e7"),n=r("4d64").indexOf,i=r("a640"),s=r("ae40"),o=[].indexOf,l=!!o&&1/[1].indexOf(1,-0)<0,u=i("indexOf"),c=s("indexOf",{ACCESSORS:!0,1:0});a({target:"Array",proto:!0,forced:l||!u||!c},{indexOf:function(e){return l?o.apply(this,arguments)||0:n(this,e,arguments.length>1?arguments[1]:void 0)}})},dbb4:function(e,t,r){var a=r("23e7"),n=r("83ab"),i=r("56ef"),s=r("fc6a"),o=r("06cf"),l=r("8418");a({target:"Object",stat:!0,sham:!n},{getOwnPropertyDescriptors:function(e){var t,r,a=s(e),n=o.f,u=i(a),c={},d=0;while(u.length>d)r=n(a,t=u[d++]),void 0!==r&&l(c,t,r);return c}})},e439:function(e,t,r){var a=r("23e7"),n=r("d039"),i=r("fc6a"),s=r("06cf").f,o=r("83ab"),l=n((function(){s(1)})),u=!o||l;a({target:"Object",stat:!0,forced:u,sham:!o},{getOwnPropertyDescriptor:function(e,t){return s(i(e),t)}})}}]);
//# sourceMappingURL=chunk-5fdb6fb9.3187559c.js.map